<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Flask Intro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <meta name="author" content="" />


  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
  <link rel="shortcut icon" href="{{ url_for('static',filename='DASHBOARD/favicon.ico')}}">

  <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" rel="stylesheet">
  
  <!-- Animate.css -->
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/css/animate.css')}}">
  <!-- Icomoon Icon Fonts-->
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/css/icomoon.css')}}">
  <!-- Bootstrap  -->
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/css/bootstrap.css')}}">
  <!-- Flexslider  -->
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/css/flexslider.css')}}">
  <!-- Flaticons  -->
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/fonts/flaticon/font/flaticon.css')}}">
  <!-- Owl Carousel -->
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/css/owl.carousel.min.css')}}">
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/css/owl.theme.default.min.css')}}">
  <!-- Theme style  -->
  <link rel="stylesheet" href="{{ url_for('static',filename='DASHBOARD/css/style.css')}}">

  <!-- Modernizr JS -->
  <script src="{{ url_for('static', filename='DASHBOARD/js/modernizr-2.6.2.min.js')}}"></script>
  <!-- FOR IE9 below -->
  <!--[if lt IE 9]>
  <script src="js/respond.min.js"></script>
<![endif]-->



</head>
<body>
  <div id="colorlib-page">
    <div class="container-wrap">

      <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><i></i></a>
      <aside id="colorlib-aside" role="complementary" class="border js-fullheight">
        <div class="text-center">
          <div class="author-img" style="background-image: url(static/DASHBOARD/images/about.jpg);"></div>


          <h1 id="colorlib-logo">Welcome {{session.username}}!</h1>

          <span class="position"><a href="/logout">Logout <span class="sr-only">(current)</span></a> </span>

        </div>

        <nav id="colorlib-main-menu" role="navigation" class="navbar">
          <div id="navbar" class="collapse">
            <ul>
              <li class="active"><a href="#" data-nav-section="home">Home</a></li>
              <li><a href="#" data-nav-section="about">About</a></li>
              <li><a href="#" data-nav-section="services">Services</a></li>
              <li><a href="#" data-nav-section="skills">Skills</a></li>
              <li><a href="#" data-nav-section="education">Education</a></li>
              <li><a href="#" data-nav-section="experience">Experience</a></li>
              <li><a href="#" data-nav-section="work">Work</a></li>
              <li><a href="#" data-nav-section="blog">Blog</a></li>
              <li><a href="#" data-nav-section="contact">Contact</a></li>
            </ul>
          </aside>
          <!-- can be useful don't delete first, if you want a main main page before login -->
      <!-- {% if session['logged_in'] == True %}
      <li><a href="/logout">Logout <span class="sr-only">(current)</span></a></li>
      {% else %}
      <li><a href="/login">Login <span class="sr-only">(current)</span></a></li>
      {% endif %} --> 
      <div id="colorlib-main">
        <section id="colorlib-hero" class="js-fullheight" data-section="home">
          <div class="flexslider js-fullheight">
            <ul class="slides">
              <li >
                <div class="overlay"></div>
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-md-6 col-md-offset-3 col-md-pull-3 col-sm-12 col-xs-12 js-fullheight slider-text">
                      <div class="slider-text-inner js-fullheight">
                        <div class="desc">

                          <p>here is the: {{data}}</p>
                          <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>



                      <div id="wrapper" style="position: relative; height: 50vh">
                        <canvas id="bar-chart"></canvas>
                      </div>

                          <!--  <canvas id="pie-chart" width="200" height="50"></canvas> -->
                          <!-- <canvas id="pie-chart2" width="200" height="50"></canvas> -->

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </section>


        <section class="colorlib-about" data-section="about">
          <div class="colorlib-narrow-content">
            <div class="row">
              <div class="col-md-12">
                <div class="row row-bottom-padded-sm animate-box" data-animate-effect="fadeInLeft">
                  <div class="col-md-12">
                    <div class="about-desc">






                      <div id="wrapper" style="position: relative; height: 50vh">
                        <canvas id="pie-chart"></canvas>
                      </div>
                    </div>
                  </div>
                </div>


              </div>
            </div>
          </div>
        </section>




        <script>
          var hash = {{ data|tojson }}
        var labels = {{ labels|tojson }}; // https://stackoverflow.com/questions/41880725/flask-error-passing-variables-to-javascript
        console.log(labels)

// Bar chart
var chart1 = new Chart(document.getElementById("bar-chart"), {
  type: 'bar',
  data: {
    labels: labels,
    datasets: [
    {
      label: "Lots available",
      backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850","#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
      data: hash
    }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    legend: { display: false },
    title: {
      display: true,
      text: 'Carpark Availability'
    }
  }
});
</script>






<script>            
  var chart2 = new Chart(document.getElementById("pie-chart"), {
    type: 'pie',
    data: {
      labels: ["Africa", "Asia", "Europe", "Latin America", "North America"],
      datasets: [{
        backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
        data: [2478,5267,734,784,433]
      }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
      title: {
        display: true,
        text: 'Predicted world population (millions) in 2050'
      },
      tooltips: {
        mode: 'label',
        callbacks: {
          label: function(tooltipItem) {
            let sum = 0;
          let dataArr = chart2.data.datasets[0].data; // Shows the data that are in the chart
          //change 'chart2' to variable of the chart. since it is var chart2, it is chart2.data.datasets[0].data
          console.log(dataArr)
          dataArr.map(data => {
            sum += data;
          });
          let hoverValue = dataArr[tooltipItem['index']] //
          let percentage = ((hoverValue / sum)*100).toFixed(2)+"%";
          let display = ['Percentage: ' + percentage, 'Amount: $' + hoverValue] //next line put in array
          return display;
        }
      }
    },
    scale: {
      ticks: {
        beginAtZero: true
      }
    }
  }
});

// var chart3 = new Chart(document.getElementById("pie-chart2"), {
//   type: 'pie',
//   data: {
//     labels: labels,
//     datasets: [{
//       backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850", "#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
//       data: hash
//     }]
//   },
//   options: {
//     title: {
//       display: true,
//       text: 'Predicted world population (millions) in 2050'
//     },
//     tooltips: {
//       mode: 'label',
//       callbacks: {
//         label: function(tooltipItem) {
//           let sum = 0;
//           let dataArr = chart3.data.datasets[0].data; //change 'chart2' to variable of the chart. since it is var chart2, it is chart2.data.datasets[0].data //explain that can also use data too instead of using the settings, but the settings will be more accurate
//           // console.log(dataArr)
//           dataArr.map(data => {
//             sum += data;
//           });
//           let hoverValue = dataArr[tooltipItem['index']] //
//           let percentage = ((hoverValue / sum)*100).toFixed(2)+"%";
//           let display = ['Percentage: ' + percentage, 'Amount: $' + hoverValue] //next line put in array
//           return display;
//         }
//       }
//     },
//     scale: {
//       ticks: {
//         beginAtZero: true
//       }
//     }
//   }
// });


</script>



</div>
</div>
</div>


<!-- jQuery -->
<script src="{{ url_for('static', filename='DASHBOARD/js/jquery.min.js')}}"></script>
<!-- jQuery Easing -->
<script src="{{ url_for('static', filename='DASHBOARD/js/jquery.easing.1.3.js')}}"></script>
<!-- Bootstrap -->
<script src="{{ url_for('static', filename='DASHBOARD/js/bootstrap.min.js')}}"></script>
<!-- Waypoints -->
<script src="{{ url_for('static', filename='DASHBOARD/js/jquery.waypoints.min.js')}}"></script>
<!-- Flexslider -->
<script src="{{ url_for('static', filename='DASHBOARD/js/jquery.flexslider-min.js')}}"></script>
<!-- Owl carousel -->
<script src="{{ url_for('static', filename='DASHBOARD/js/owl.carousel.min.js')}}"></script>
<!-- Counters -->
<script src="{{ url_for('static', filename='DASHBOARD/js/jquery.countTo.js')}}"></script>


<!-- MAIN JS -->
<script src="{{ url_for('static', filename='DASHBOARD/js/main.js')}}"></script>





</body>
</html> 